[{"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\index.js":"1","C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\App.js":"2","C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\reportWebVitals.js":"3","C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Selection\\Selection.js":"4","C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Board\\Board.js":"5","C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Tube\\Tube.js":"6","C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Ball\\Ball.js":"7","C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\context\\store.js":"8"},{"size":500,"mtime":499162500000,"results":"9","hashOfConfig":"10"},{"size":1127,"mtime":1612710865884,"results":"11","hashOfConfig":"10"},{"size":362,"mtime":499162500000,"results":"12","hashOfConfig":"10"},{"size":795,"mtime":1613463305916,"results":"13","hashOfConfig":"10"},{"size":1554,"mtime":1613468303918,"results":"14","hashOfConfig":"10"},{"size":576,"mtime":1612273826468,"results":"15","hashOfConfig":"10"},{"size":313,"mtime":1612273847001,"results":"16","hashOfConfig":"10"},{"size":6297,"mtime":1612868072989,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"m4kt0o",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"20"},"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\index.js",[],["36","37"],"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\App.js",[],"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\reportWebVitals.js",[],"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Selection\\Selection.js",[],"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Board\\Board.js",["38"],"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Tube\\Tube.js",[],"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\Ball\\Ball.js",[],"C:\\Users\\lital\\Documents\\react projects\\ball-sort-game\\src\\components\\context\\store.js",["39","40"],"import React, { createContext, useState, useEffect } from 'react';\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport const ballsContext = createContext();\r\n\r\nconst BallsContextProvider = (props) => {\r\n\r\n  const [initialRandomBalls, setInitialRandomBalls] =  useState();\r\n  const [randomBalls, setRandomBalls] = useState();\r\n  const [movedBall, setMovedBall] = useState(null);\r\n  const [undoCount, setUndoCount] = useState(5);\r\n  const [undoMoves, setUndoMoves] = useState([]);\r\n  const [completed, setComplited] = useState(false);\r\n\r\n\r\n  // Create array of the correct length according to users` choice\r\n  const shuffleBalls = (amount) => {\r\n    let arr = [];\r\n    for (let i = 1; i <= amount; i++) {\r\n      for (let j = 0; j < 4; j++) {\r\n        arr.push({ num: i, id: uuidv4() })\r\n      }\r\n    }\r\n    shuffle(arr);\r\n  }\r\n  // Shuffles the attay and adds two empty tubes\r\n  const shuffle = (array) => {\r\n    let emptyTubes = new Array([], []);\r\n    let shuffled = [];\r\n    for (let i = array.length - 1; i > 0; i--) {\r\n      const j = Math.floor(Math.random() * (i + 1));\r\n      [array[i], array[j]] = [array[j], array[i]];\r\n    }\r\n    while (array.length) {\r\n      shuffled.push(array.splice(0, 4))\r\n    }\r\n    let temp = shuffled.concat(emptyTubes);\r\n    setRandomBalls(temp);\r\n    makeRandomBallsCopy(temp)\r\n  }\r\n  \r\n  const makeRandomBallsCopy = (random) => {\r\n    setInitialRandomBalls(JSON.parse(JSON.stringify(random)));\r\n    console.log('first init', initialRandomBalls)\r\n  }\r\n\r\n \r\n  // Select a ball \r\n  const chooseBallHandler = (index) => {\r\n    let tempRandomBalls = [...randomBalls];\r\n    setMovedBall(Object.assign(tempRandomBalls[index][tempRandomBalls[index].length - 1], { index: index }));\r\n    Object.assign(tempRandomBalls[index][tempRandomBalls[index].length - 1], { class: 'chosen' });\r\n    setRandomBalls(tempRandomBalls);\r\n    console.log('added');\r\n  }\r\n\r\n  // Deselect a ball\r\n  const rmChosenBallHandler = (index) => {\r\n    let tempRandomBalls = [...randomBalls];\r\n    delete tempRandomBalls[index][tempRandomBalls[index].length - 1].class;\r\n    setRandomBalls(tempRandomBalls);\r\n    setMovedBall(null);\r\n    console.log('removed');\r\n  }\r\n\r\n  // Move ball to a different tube\r\n  const changeTubeHandler = (index) => {\r\n    let tempRandomBalls = [...randomBalls];\r\n    delete tempRandomBalls[movedBall.index][tempRandomBalls[movedBall.index].length - 1].class;\r\n    tempRandomBalls[index].push(tempRandomBalls[movedBall.index][tempRandomBalls[movedBall.index].length - 1]);\r\n    tempRandomBalls[movedBall.index].splice(tempRandomBalls[movedBall.index].length - 1, 1);\r\n    setRandomBalls(tempRandomBalls);\r\n    setMovedBall(null);\r\n    console.log('moved');\r\n    movesHistory(movedBall.index, index);\r\n    didWinHandler();\r\n  }\r\n\r\n  // Save moves for the undo\r\n  const movesHistory = (oldIndex, newIndex) => {\r\n      let tempUndoMoves = [...undoMoves];\r\n    tempUndoMoves.push({oldIndex, newIndex});\r\n    if(tempUndoMoves.length > undoCount) {\r\n      tempUndoMoves.splice(0,tempUndoMoves.length - undoCount);\r\n    }\r\n    setUndoMoves(tempUndoMoves);\r\n    console.log(undoMoves)\r\n  }\r\n\r\n  const undoHandler = () => {\r\n    if(undoMoves.length === 0) {\r\n      return\r\n    };\r\n    if (undoCount === 0){\r\n      return\r\n    } else {\r\n      setUndoCount(undoCount-1);\r\n      let tempRandomBalls = [...randomBalls];\r\n      console.log('undoMoves', undoMoves)\r\n      let undoItem = tempRandomBalls[undoMoves[undoMoves.length-1].newIndex].pop();\r\n      console.log('undoItem',undoItem);\r\n      tempRandomBalls[undoMoves[undoMoves.length-1].oldIndex].push(undoItem);\r\n      setRandomBalls(tempRandomBalls);\r\n      let tempUndoMoves = [...undoMoves];\r\n      tempUndoMoves.pop();\r\n      setUndoMoves(tempUndoMoves);\r\n      console.log(undoCount)\r\n    }\r\n  }\r\n\r\n  // Check winning condition\r\n  const didWinHandler = () => {\r\n    let didWin;\r\n    for (let i = 0; i < randomBalls.length; i++) {\r\n      if (didWin === false) {\r\n        console.log('didWin is false')\r\n        break;\r\n      };\r\n      if(randomBalls[i].length !== 0 && randomBalls[i].length < 4){console.log('less than 4', randomBalls, i); didWin = false};\r\n      \r\n      if (randomBalls[i].length > 0 && randomBalls[i].length === 4) {\r\n        for (let j = 1; j < randomBalls[i].length; j++) {\r\n          if (randomBalls[i][j].num === randomBalls[i][j - 1].num) {\r\n            didWin = true;\r\n            console.log('equal to previous')\r\n          } else {\r\n            didWin = false;\r\n            console.log('not equal to previous')\r\n            console.log('break')\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      console.log(randomBalls)\r\n    }\r\n    return setComplited(didWin);\r\n  }\r\n\r\n  // Clicked ball handler\r\n  const moveBallHandler = (tube) => {\r\n    console.log(movedBall)\r\n    if (randomBalls[tube].length < 1 && movedBall === null) { return };\r\n\r\n    if (movedBall === null) {\r\n      chooseBallHandler(tube);\r\n    };\r\n\r\n    if (movedBall !== null) {\r\n      if (tube === movedBall.index) {\r\n        rmChosenBallHandler(tube);\r\n      }\r\n      else if (randomBalls[tube].length === 4) {\r\n        rmChosenBallHandler(movedBall.index);\r\n        chooseBallHandler(tube);\r\n      } else\r\n        if (randomBalls[tube].length < 1) {\r\n          changeTubeHandler(tube);\r\n        } else if (movedBall.num === randomBalls[tube][randomBalls[tube].length - 1].num && randomBalls[tube].length !== 4) {\r\n          changeTubeHandler(tube);\r\n        } else if (movedBall.num !== randomBalls[tube][randomBalls[tube].length - 1].num) {\r\n          rmChosenBallHandler(movedBall.index);\r\n          chooseBallHandler(tube);\r\n        };\r\n    }\r\n  }\r\n\r\n  // Start over the same game\r\n  const restartHandler = () => {\r\n    let temp = [...initialRandomBalls]\r\n    setRandomBalls(temp);\r\n    setUndoCount(5);\r\n    setUndoMoves([]);\r\n    console.log('init', initialRandomBalls, 'rand', randomBalls)\r\n  }\r\n\r\n  return (\r\n    <ballsContext.Provider value={\r\n      {\r\n        shuffleBalls,\r\n        randomBalls,\r\n        setRandomBalls,\r\n        moveBallHandler,\r\n        completed,\r\n        undoHandler,\r\n        undoCount,\r\n        initialRandomBalls,\r\n        setInitialRandomBalls,\r\n        restartHandler\r\n      }\r\n    }>\r\n      {props.children}\r\n    </ballsContext.Provider>\r\n  );\r\n}\r\n\r\nexport default BallsContextProvider;",{"ruleId":"41","replacedBy":"42"},{"ruleId":"43","replacedBy":"44"},{"ruleId":"45","severity":1,"message":"46","line":4,"column":10,"nodeType":"47","messageId":"48","endLine":4,"endColumn":14},{"ruleId":"45","severity":1,"message":"49","line":1,"column":42,"nodeType":"47","messageId":"48","endLine":1,"endColumn":51},{"ruleId":"50","severity":1,"message":"51","line":28,"column":22,"nodeType":"52","messageId":"53","endLine":28,"endColumn":39},"no-native-reassign",["54"],"no-negated-in-lhs",["55"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","'useEffect' is defined but never used.","no-array-constructor","The array literal notation [] is preferable.","NewExpression","preferLiteral","no-global-assign","no-unsafe-negation"]